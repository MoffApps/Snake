<html>
<head>

<title>Canvas</title>

</head>

<body>
<center>
</br>
<h1>Hi Pat</h1>
</br>

<canvas id="myCanvas" width="500" height="500" style="border:4px solid #000000;"></canvas>
</center>

<script>



var gnStartX = 0;
var gnStartY = 0;
var gnCurrentX = 0;
var gnCurrent = 0;
var gnEndX = 0;
var gnEndY = 0;

var globalMovement = 0;


$(document).on('vmousedown', function(event){
    gnStartX = event.pageX;
    gnStartY = event.pageY;
    event.preventDefault();
});

$(document).on('vmousemove', function(event){
    var newPosX = event.pageX;
    var newPosY = event.pageY; 
    var distance = Math.ceil(nthroot(Math.pow((newPosX - gnStartX),2) + Math.pow((newPosY - gnStartY),2), 2));    
    event.preventDefault();
});

$(document).on('vmouseup', function(event){
    gnEndX = event.pageX;
    gnEndY = event.pageY;  
    var distance = Math.ceil(nthroot(Math.pow((gnEndX - gnStartX),2) + Math.pow((gnEndY - gnStartY),2), 2));
    globalMovement+=distance;
    
    if(Math.abs(gnEndX - gnStartX) > Math.abs(gnEndY - gnStartY)) {
        if(gnEndX > gnStartX) {
            //alert("Swipe Right - Distance " + distance + 'px');
        } else {
            //alert("Swipe Left - Distance " + distance + 'px');     
        }
    } else {
        if(gnEndY > gnStartY) {
            //alert("Swipe Bottom - Distance " + distance + 'px');  
        } else {
            //alert("Swipe Top - Distance " + distance + 'px');      
        }        
    }  
    alert('Global movement = '  + globalMovement);
    event.preventDefault();      
});

function nthroot(x, n) {
  try {
    var negate = n % 2 == 1 && x < 0;
    if(negate)
      x = -x;
    var possible = Math.pow(x, 1 / n);
    n = Math.pow(possible, n);
    if(Math.abs(x - n) < 1 && (x > 0 == n > 0))
      return negate ? -possible : possible;
  } catch(e){}
}

var canvas = document.getElementById("myCanvas");	
var context = canvas.getContext("2d");			

var canvasWidth = 500;
var canvasHeight = 500;
var l = 10;
var snakeArray =[];
var direction = 'right';
var count = 0;
var score = false;

CreateSnake();

setInterval(function(){Move()}, 300);


function Move(){
count = count +1;

var snakeObject = new Object();

if(count<10){
snakeObject.x = snakeArray[0].x+l;
snakeObject.y = snakeArray[0].y;
}
else if (count<20){
snakeObject.x = snakeArray[0].x;
snakeObject.y = snakeArray[0].y+l;
}
else if (count<30){
snakeObject.x = snakeArray[0].x-l;
snakeObject.y = snakeArray[0].y;
}
else{
snakeObject.x = snakeArray[0].x;
snakeObject.y = snakeArray[0].y-l;
}
console.log(snakeArray);
snakeArray.unshift(snakeObject);

if(!score){
console.log(snakeArray);
context.fillStyle = "#FFffff";
context.fillRect(snakeArray[snakeArray.length-1].x,snakeArray[snakeArray.length-1].y,l,l);
snakeArray.pop();
}


context.fillStyle = "#000000";
context.fillRect(snakeArray[0].x,snakeArray[0].y,l,l);

}

function CreateSnake(){

var snakeObject0 = new Object();
snakeObject0.x = 130;
snakeObject0.y = 100;
snakeArray.push(snakeObject0);

var snakeObject1 = new Object();
snakeObject1.x = 120;
snakeObject1.y = 100;

snakeArray.push(snakeObject1);

var snakeObject2 = new Object();
snakeObject2.x = 110;
snakeObject2.y = 100;
snakeArray.push(snakeObject2);


var snakeObject3 = new Object();
snakeObject3.x = 100;
snakeObject3.y = 100;

snakeArray.push(snakeObject3);

for(var i=0;i<snakeArray.length;i++){
context.fillRect(snakeArray[i].x,snakeArray[i].y,l,l);
}



}

</script>

</body>
</html>